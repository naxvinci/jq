<input type='button' value='전체선택' onclick='agree()'><br>
<fieldset>
    <legend>약관동의</legend>
    <label><input type='checkbox' value='1'>동의1</label><br>
    <label><input type='checkbox' value='2'>동의2</label><br>
    <label><input type='checkbox' value='3'>동의3</label><br>
    <label><input type='checkbox' value='4'>동의4</label><br>
</fieldset>
<script src="http://code.jquery.com/jquery-3.1.1.min.js"></script>
<script>
    function agree() {

        var len = $('input:checked').length;
        var status = true;
        if(len == 4){
            status = false;

        }
        $('input:checkbox').prop('checked', status)
}
</script>